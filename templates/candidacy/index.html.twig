{% extends 'base.html.twig' %}

{% block title %}Offer index
{% endblock %}

{% block body %}

	<main class="container mb-4">
		<h1 class="text-center">Espace Admin</h1>
		<h2 class="text-center">Les candidatures</h2>

		<form action="{{ path('app_candidacy_index') }}" method="post" class="d-none d-lg-block mt-3 mb-4">
			<div class="form-row formSearchOffer">
				<div class="form-group col-md-6 searchOffer">
					<label for="inputSearch">Titre de l'offre</label>
					<input type="text" name="searchTitle" class="form-control" placeholder="Développeur">
				</div>
				<div class="form-group col-md-6 searchOffer">
					<label for="inputLocation">Nom du candidat</label>
					<input type="text" name='searchName' class="form-control" placeholder="Doe">
				</div>
				<div class="form-group col-md-6 searchOffer">
					<label for="inputLocationRadius">Date de candidature</label>
					<input type="date" name='searchDate' class="form-control" placeholder="16/01/2023">
				</div>
				<button type="submit" class="btn text-white rounded-0 buttonSearchOffer">Rechercher</button>
			</div>
		</form>

		{% if search == true %}
			<div class="text-center fw-bold">
				<a class="deleteSearch" href="{{ path('app_candidacy_index') }}">Afficher toutes les candidatures</a>
			</div>
		{% endif %}

		<table class="table candidacyTable mt-2">
			<colgroup>
				<col span="1" style="width: 40%;">
				<col span="1" style="width: 25%;">
				<col span="1" style="width: 25%;">
				<col span="1" style="width: 10%;">

			</colgroup>
			<thead>
				<tr>
					<th>Titre de l'offre</th>
					<th>Nom du candidat</th>
					<th>Date de candidature</th>
					<th>Statut</th>
				</tr>
			</thead>
			<tbody>
				{% for candidacy in candidacies %}
					<tr>
						<td>
							<a href="{{ path('app_offer_show', {'id': candidacy.offer.id}) }}">{{ candidacy.offer.title }}</a>
						</td>
						<td>
							<a href="#">{{ candidacy.candidate.fullname}}</a>
						</td>
						<td>{{ candidacy.candidacyDate ? candidacy.candidacyDate|date('Y/m/d') : '' }}</td>
						<td>{{candidacy.status.status}}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="4">Pas de candidatures trouvées</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</main>
{% endblock %}
